<script>
  Highcharts.setOptions({
    colors: ['#90ed7d', '#f7a35c', '#434348']
  });

  Highcharts.chart('rot_distribution', {
    title: {
      text: 'AVAILABILITY UPON DISCOVERY',
      align: 'center',
      verticalAlign: 'middle',
      useHTML: true,
      x: 0,
      y: 0,
      style: {
        textAlign: 'center',
        fontSize: '20px',
        width: '180px'
      }
    },
    chart: {
      plotBackgroundColor: null,
      plotBorderWidth: 0,
      plotShadow: false,
      type: 'pie',
      spacingLeft: 0,
      spacingRight: 0
    },
    credits: { enabled: false },
    plotOptions: {
      pie: {
        center: ['50%', '50%'],
        dataLabels: {
          enabled: true,
          useHTML: true,
          distance: 30,
          style: {
            fontSize: '22px',
            fontWeight: 'bold',
            textOutline: 'none'
          },
          formatter: function() {
            return '<span style="color:' + this.point.color + '">' + this.point.name + '</span>';
          }
        },
      }
    },
    series: [{
      name: 'Web Citations',
      innerSize: '55%',
      data: [
        { name: '<a href="{{ base }}/citations/available">available</a>', y: {{ available }} },
        { name: '<a href="{{ base }}/citations/redirect">redirected</a>', y: {{ redirected }} },
        { name: '<a href="{{ base }}/citations/unavailable">unavailable</a>', y: {{ unavailable }} }
      ],
    }],
    responsive: {
      rules: [{
        condition: {
          maxWidth: 480
        },
        chartOptions: {
          title: {
            style: {
              fontSize: '14px',
              width: '100px'
            }
          },
          plotOptions: {
            pie: {
              dataLabels: {
                distance: 10,
                style: {
                  fontSize: '14px'
                }
              }
            }
          },
          series: [{
            size: '90%',
            innerSize: '60%'
          }]
        }
      }]
    }
  });
</script>
