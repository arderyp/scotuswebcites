{% extends "base.html" %}
{% load custom_filters %}
{% load static %}

{% block javascript %}
<script src="{% static 'js/opinions.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="container">
      <div class="row">

        <div class="container">
          <div class="row">
            <div id="javascript-filters" style="display:none;">
              <fieldset role="group">
                <button id="filter-all" class="outline" title="All items">
                  All <span id="filter-all-count"></span>
                </button>
                <button id="filter-citations" class="outline" title="Items with web citations">
                  With Web Citations <span id="filter-citations-count"></span>
                </button>
                <button id="filter-revisions" class="outline" title="Revised items">
                  Revisions <span id="filter-revisions-count"></span>
                </button>
              </fieldset>
            </div>
          </div>
        </div>

    <figure>
      <table class="table table-responsive sticky-header">
      <thead>
      <tr>
        <th>Opinion</th>
        <th>Justice</th>
        <th>Published</th>
        <th class="text-right">WebCites</th>
      </tr>
      </thead>
      <tbody>
        {% for opinion in opinions %}
          <tr class="{% if '[REVISION]' in opinion.name %}revision{% endif %} {% if opinion.citation_count %}has-citations{% endif %}">

            <td>
              <a href="{{ opinion.pdf_url }}" title="View Original Opinion" target="_blank">
                {{ opinion.name }}
              </a>
            </td>


            <td class="justice-name">{{ opinion.justice.name }}</td>

            <td>
              {{ opinion.published|yyyymmdd }}
              <span class="glyphicon glyphicon-info-sign text-info" title="Discovered on {{ opinion.discovered|yyyymmdd }}"></span>
            </td>

            <td class="text-right">
              {% if opinion.citation_count %}
                <a href="/citations/{{ opinion.id  }}" title="view opinion citations" target="_blank">
                  <span class="label label-primary label-as-badge citation-count">
                    {{ opinion.citation_count }}
                  </span>
                </a>
              {% else %}
                <span class="label label-default label-as-badge">{{ opinion.citation_count }}</span>
              {% endif %}
            </td>

          </tr>
        {% endfor %}
      </tbody>
    </table>
    </figure>
  </div>
</div>
{% endblock %}
